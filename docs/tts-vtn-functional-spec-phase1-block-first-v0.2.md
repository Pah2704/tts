# TTSâ€‘VTN â€“ Äáº·c táº£ chá»©c nÄƒng (Giai Ä‘oáº¡n 1, Blockâ€‘first, Phi ká»¹ thuáº­t)

**Tráº¡ng thÃ¡i:** Báº£n nhÃ¡p v0.2 (Ä‘Ã£ khoÃ¡ cÃ¡c quyáº¿t Ä‘á»‹nh 1â€“4)  
**Chá»§ sá»Ÿ há»¯u:** Phan Anh Huy  
**Pháº¡m vi:** Giai Ä‘oáº¡n 1 (Local / má»™t ngÆ°á»i dÃ¹ng), TTS tiáº¿ng Anh; máº·c Ä‘á»‹nh **Piper**, cÃ³ cÃ´ng táº¯c **Cháº¥t lÆ°á»£ng cao (XTTS)**.  
**NguyÃªn táº¯c:** Workspace theo **Blockâ€‘first** Â· Xá»­ lÃ½ **báº¥t Ä‘á»“ng bá»™** Â· UI Ä‘Æ¡n giáº£n, dá»… Ä‘oÃ¡n Â· Cháº¥t lÆ°á»£ng Ã¢m do **máº·c Ä‘á»‹nh há»£p lÃ½**, trÃ¡nh tham sá»‘ quÃ¡ chuyÃªn sÃ¢u cho ngÆ°á»i dÃ¹ng cuá»‘i.

---

## 1) Má»¥c tiÃªu, ngÆ°á»i dÃ¹ng, ná»™i dung
- **Má»¥c tiÃªu chÃ­nh:** Sáº£n xuáº¥t Ã¢m thanh tháº­t phá»¥c vá»¥ giáº£ng dáº¡y (tiáº¿ng Anh) nhanh vÃ  á»•n Ä‘á»‹nh.
- **NhÃ¢n váº­t ngÆ°á»i dÃ¹ng:** Giáº£ng viÃªn tá»± sá»­ dá»¥ng á»©ng dá»¥ng (khÃ´ng cÃ³ tÃ i khoáº£n sinh viÃªn).
- **Miá»n ná»™i dung Ä‘áº§u vÃ o:** Tiáº¿ng Anh + viáº¿t táº¯t + emoji + má»™t Ã­t kÃ½ hiá»‡u ká»¹ thuáº­t (sá»‘, Ä‘Æ¡n vá»‹, ngÃ y thÃ¡ng).
- **NgoÃ i pháº¡m vi (GÄ1):** Cá»™ng tÃ¡c nhiá»u ngÆ°á»i dÃ¹ng, import/export Ä‘á»‹nh dáº¡ng ná»™i dung (ngoáº¡i trá»« dÃ¡n vÄƒn báº£n), timeline/waveform nÃ¢ng cao.

---

## 2) MÃ´ hÃ¬nh Workspace
**Project â†’ Blocks â†’ Rows (cÃ¢u/tá»«)**
- á»¨ng dá»¥ng cÃ³ **2 trang riÃªng**: **Trang Nháº­p VÄƒn Báº£n** (tá»‘i giáº£n) vÃ  **Trang Xá»­ LÃ½ (Workspace)**.
- **Trang Nháº­p VÄƒn Báº£n:** cÃ³ 2 tab **ÄÆ¡n thoáº¡i** / **Há»™i thoáº¡i** (tÃ´ mÃ u & gÃ¡n tÃªn nhÃ¢n váº­t ngay á»Ÿ Ä‘Ã¢y).
- **Workspace:** táº­p trung Ä‘iá»u khiá»ƒn Block/Row; cÃ³ nÃºt **â€œNháº­p thÃªm ná»™i dungâ€** Ä‘á»ƒ má»Ÿ **Giao diá»‡n Nháº­p nhanh** (overlay) dÃ¹ng **cÃ¹ng quy táº¯c tÃ¡ch** nhÆ° Trang Nháº­p.

**Äá»‘i tÆ°á»£ng chÃ­nh:**
- **Project**: metadata, thiáº¿t láº­p chung, FX, tráº¡ng thÃ¡i cÃ´ng táº¯c Cháº¥t lÆ°á»£ng cao, Ã¡nh xáº¡ nhÃ¢n váº­tâ†’giá»ng.
- **Block**: má»™t Ä‘oáº¡n vÄƒn báº£n liá»n máº¡ch; sá»Ÿ há»¯u Voice/Style/Speed/Pitch/Pause/Variability; nghe thá»­ theo Block.
- **Row**: má»™t cÃ¢u (hoáº·c Ä‘Æ¡n vá»‹ tÃ¡ch); cÃ³ thá»ƒ nghe thá»­ vÃ  (khi HQ báº­t) má»Ÿ â€œHiá»‡u chá»‰nh nÃ¢ng caoâ€ cho cÃ¢u.

---

## 3) DÃ¡n & TÃ¡ch (Paste & Split)
**Ãp dá»¥ng cho _Trang Nháº­p VÄƒn Báº£n_; trong _Workspace_, nÃºt â€œNháº­p thÃªm ná»™i dungâ€ sáº½ má»Ÿ _Giao diá»‡n Nháº­p nhanh_ (overlay) vá»›i cÃ¹ng luá»“ng & quy táº¯c tÃ¡ch.**

**Giao diá»‡n dÃ¡n cÃ³ 2 tab:**

- **ÄÆ¡n thoáº¡i:** 1 vÃ¹ng nháº­p lá»›n kÃ¨m hÆ°á»›ng dáº«n *â€œDÃ¡n Ä‘oáº¡n vÄƒn cáº§n chuyá»ƒn Ä‘á»•i vÃ o Ä‘Ã¢yâ€*. Khi nháº¥n **Tiáº¿p tá»¥c**:
  - Má»—i **Ä‘oáº¡n** (ngÄƒn bá»Ÿi dÃ²ng trá»‘ng) â†’ **1 Block**.
  - BÃªn trong tá»«ng Block, há»‡ thá»‘ng **tá»± tÃ¡ch theo cÃ¢u** vá»›i cÆ¡ cháº¿ báº£o vá»‡ viáº¿t táº¯t/emoji/kÃ½ hiá»‡u phá»• biáº¿n.
  - **Báº£o vá»‡ áº©n cÃ¢u quÃ¡ dÃ i:** náº¿u 1 cÃ¢u vÆ°á»£t ngÆ°á»¡ng (**>40 tá»«** hoáº·c **>240 kÃ½ tá»±**), engine sáº½ **tÃ¡ch ná»™i bá»™ theo dáº¥u pháº©y/;/** Ä‘á»ƒ báº£o Ä‘áº£m nhá»‹p thá»Ÿ vÃ  Ä‘á»™ mÆ°á»£t, **nhÆ°ng UI váº«n hiá»ƒn thá»‹ 1 Row**.

- **Há»™i thoáº¡i:** 1 vÃ¹ng nháº­p lá»›n kÃ¨m hÆ°á»›ng dáº«n *â€œMá»—i lÆ°á»£t thoáº¡i báº¯t Ä‘áº§u báº±ng tÃªn nhÃ¢n váº­t, theo Ä‘á»‹nh dáº¡ng `[Name]: ná»™i dung`; xuá»‘ng dÃ²ng khi Ä‘á»•i nhÃ¢n váº­t.â€* Trong Ã´ nháº­p:
  - Há»‡ thá»‘ng tá»± nháº­n diá»‡n **nhÃ¢n váº­t** vÃ  **tÃ´ mÃ u** theo tá»«ng tÃªn Ä‘á»ƒ ngÆ°á»i dÃ¹ng dá»… soÃ¡t lá»—i.
  - Khi nháº¥n **Tiáº¿p tá»¥c**:
    - Má»—i **lÆ°á»£t thoáº¡i** cá»§a má»™t nhÃ¢n váº­t â†’ **1 Block**.
    - BÃªn trong Block **tá»± tÃ¡ch theo cÃ¢u** nhÆ° trÃªn.
  - Náº¿u phÃ¡t hiá»‡n lá»—i Ä‘á»‹nh dáº¡ng (thiáº¿u ngoáº·c vuÃ´ng, dÃ²ng khÃ´ng cÃ³ dáº¥u `:`, tÃªn trá»‘ng, kÃ½ tá»± khÃ´ng há»£p lá»‡, hoáº·c tÃªn khÃ´ng nháº¥t quÃ¡n), hiá»ƒn thá»‹ há»™p thoáº¡i cáº£nh bÃ¡o:
    - **ThÃ´ng bÃ¡o:** *â€œPhÃ¡t hiá»‡n lá»—i trong ká»‹ch báº£n há»™i thoáº¡i.â€*
    - **Tuá»³ chá»n:** **Quay láº¡i chá»‰nh sá»­a** Â· **Tiáº¿p tá»¥c vÃ o Workspace** (váº«n táº¡o Block/Row theo má»©c nháº­n diá»‡n hiá»‡n cÃ³).

- **Tá»± tÃ¡ch:** **Báº­t** máº·c Ä‘á»‹nh vÃ  Ã¡p dá»¥ng cho cáº£ ÄÆ¡n thoáº¡i & Há»™i thoáº¡i.
- **KhÃ´ng há»— trá»£ SSML khi dÃ¡n:** náº¿u ngÆ°á»i dÃ¹ng dÃ¡n chuá»—i cÃ³ dáº¡ng tháº» (vÃ­ dá»¥ `<prosody>`), há»‡ thá»‘ng coi lÃ  **text thÆ°á»ng**.
- **Nháº­n diá»‡n nhÃ¢n váº­t:** **chá»‰** há»— trá»£ Ä‘á»‹nh dáº¡ng `[Name]:`; ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ thay Ä‘á»•i mapping sau khi vÃ o Workspace.
- **Tá»« Ä‘iá»ƒn cÃ³ thá»ƒ chá»‰nh:** ngÆ°á»i dÃ¹ng thÃªm/sá»­a **Protected patterns** (viáº¿t táº¯t/emoji/Ä‘Æ¡n vá»‹). **Seed v1** (báº£o vá»‡ khá»i tÃ¡ch/má»Ÿ rá»™ng):

  **Viáº¿t táº¯t & danh xÆ°ng:** Mr., Mrs., Ms., Mx., Dr., Prof., St., Jr., Sr., vs., etc., e.g., i.e., cf., No., Fig., Eq., U.S., U.K., U.N., a.m., p.m.  
  **ThÃ¡ng:** Jan., Feb., Mar., Apr., Jun., Jul., Aug., Sep., Sept., Oct., Nov., Dec.  
  **Thá»© trong tuáº§n:** Mon., Tue., Tues., Wed., Thu., Thur., Fri., Sat., Sun.  
  **ÄÆ¡n vá»‹ & kÃ½ hiá»‡u:** %, Â°C, Â°F, km, m, cm, mm, km/h, mph, kg, g, mg, L, mL, s, sec, min, hr, h, kHz, MHz, GHz, $, â‚¬, Â£, Â¥, 1st, 2nd, 3rd, 4th.  
  **Emoji (vÃ­ dá»¥):** ğŸ™‚, ğŸ˜‰, ğŸ˜‚, ğŸ˜€, ğŸ˜…, â¤ï¸, ğŸ‘, ğŸ‘, âœ…, âŒ, â­, ğŸ”¥.

**AC:**  
- **ÄÆ¡n thoáº¡i:** vÄƒn báº£n cÃ³ nhiá»u Ä‘oáº¡n â†’ sá»‘ **Block** Ä‘Ãºng báº±ng sá»‘ Ä‘oáº¡n; trong má»—i Block, tÃ¡ch cÃ¢u chÃ­nh xÃ¡c vÃ  tÃ´n trá»ng protected patterns; cÃ¢u quÃ¡ dÃ i **váº«n hiá»ƒn thá»‹ 1 Row** nhÆ°ng phÃ¡t mÆ°á»£t nhá» tÃ¡ch áº©n.  
- **Há»™i thoáº¡i:** má»—i lÆ°á»£t `[Name]:` â†’ **1 Block**, mÃ u nhÃ¢n váº­t Ä‘Ãºng â‰¥95%; khi cÃ³ lá»—i, xuáº¥t hiá»‡n cáº£nh bÃ¡o vá»›i 2 lá»±a chá»n *Quay láº¡i chá»‰nh sá»­a* / *Tiáº¿p tá»¥c vÃ o Workspace*; sau khi **Tiáº¿p tá»¥c**, ngÆ°á»i dÃ¹ng váº«n cÃ³ thá»ƒ chá»‰nh trong Workspace.  
- **SSML trong input:** luÃ´n hiá»ƒn thá»‹ nhÆ° text, khÃ´ng bá»‹ xá»­ lÃ½.

---

## 4) Thao tÃ¡c cáº¥p Block
- Äiá»u khiá»ƒn: **Voice, Style, Speed %, Pitch %, Add Pause, Variability, Emphasis, â–¶ Nghe, â€¦ (NhÃ¢n báº£n / Di chuyá»ƒn / XoÃ¡)**
- Chá»‰nh cáº¥u trÃºc: **TÃ¡ch/Gá»™p/NhÃ¢n báº£n Block**; kÃ©o tháº£ Ä‘á»ƒ Ä‘á»•i thá»© tá»±.
- Máº·c Ä‘á»‹nh: xem Â§20.

**AC:** Má»i chá»‰nh sá»­a **Undo** Ä‘Æ°á»£c; nghe thá»­ pháº£n Ã¡nh cáº¥u hÃ¬nh má»›i ngay.

---

## 5) Thao tÃ¡c cáº¥p CÃ¢u (Row)
- Äiá»u khiá»ƒn: **Text, â–¶ Nghe, TÃ¡ch, Gá»™p, â€¦**  
- Khi **Cháº¥t lÆ°á»£ng cao (HQ)** **báº­t**: dÃ¹ng **Hiá»‡u chá»‰nh nÃ¢ng cao** á»Ÿ cáº¥p Row.  
- **KhÃ´ng hiá»ƒn thá»‹** thá»i lÆ°á»£ng tá»«ng cÃ¢u (giá»¯ UI gá»n á»Ÿ GÄ1).

**AC:** TÃ¡ch/Gá»™p giá»¯ nguyÃªn thá»«a káº¿ giá»ng/style tá»« Block; Hiá»‡u chá»‰nh nÃ¢ng cao chá»‰ Ã¡p khi HQ báº­t.

---

## 6) Ãnh xáº¡ NhÃ¢n váº­t â†’ Giá»ng
- VÄƒn báº£n cÃ³ `[Name]:` sáº½ tá»± Ã¡nh xáº¡ nhÃ¢n váº­tâ†’giá»ng (giá»¯ giá»ng theo láº§n xuáº¥t hiá»‡n Ä‘áº§u).  
- NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ thay Ä‘á»•i táº¡i Block sau Ä‘Ã³.

**AC:** â‰¥95% dÃ²ng cÃ³ `[Name]:` Ä‘Æ°á»£c map Ä‘Ãºng theo luáº­t Ä‘Æ¡n giáº£n; ghi Ä‘Ã¨ cá»§a ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c lÆ°u.

---

## 7) ThÆ° viá»‡n giá»ng (Piper, tÃ­ch há»£p sáºµn)
**Cung cáº¥p 6â€“8 giá»ng EN (khÃ´ng import giá»ng tuá»³ biáº¿n á»Ÿ GÄ1):**
- **Natalie (F, áº¥m)** â€“ thuyáº¿t minh lá»›p há»c rÃµ rÃ ng
- **Ava (F, trung tÃ­nh)** â€“ má»¥c Ä‘Ã­ch chung
- **Grace (F, sÃ¡ng)** â€“ giáº£i thÃ­ch giÃ u nÄƒng lÆ°á»£ng
- **Liam (M, trung tÃ­nh)** â€“ cÃ¢n báº±ng, hÃ ng ngÃ y
- **James (M, tráº§m)** â€“ giá»ng giáº£ng Ä‘Æ°á»ng quyá»n lá»±c
- **Ethan (M, rÃµ rÃ ng)** â€“ gá»n, sáº¯c nÃ©t
- **Noah (M, bÃ¬nh tÄ©nh)** â€“ ká»ƒ chuyá»‡n thÆ° thÃ¡i

**AC:** TrÃ¬nh chá»n giá»ng cÃ³ â‰¥6 má»¥c kÃ¨m avatar & mÃ´ táº£ ngáº¯n; Ä‘á»•i giá»ng cáº­p nháº­t nghe thá»­ ngay.

---

## 8) Style (macro) & Äá»™ mÆ°á»£t ghÃ©p
- Style dáº¡ng chip: **Conversational Â· Newscast Â· Storytelling Â· Promo Â· Calm Â· Excited Â· Whisper Â· Narration**
- **Triáº¿t lÃ½ Macro:** ngÆ°á»i dÃ¹ng chá»n style; á»©ng dá»¥ng tinh chá»‰nh nháº¹ Speed/Pitch/Pause á»Ÿ háº­u trÆ°á»ng.  
- **Háº­u ká»³:** há»‡ thá»‘ng tá»± tá»‘i Æ°u **Ä‘á»™ mÆ°á»£t** khi ghÃ©p cÃ¢u/Ä‘oáº¡n (khÃ´ng cáº§n nÃºt chá»‰nh tay).

**AC:** Äá»•i style táº¡o khÃ¡c biá»‡t rÃµ rÃ ng vá» sáº¯c thÃ¡i/nhá»‹p nhÆ°ng **váº«n mÆ°á»£t** khi ná»‘i.

---

## 9) CÃ´ng táº¯c Cháº¥t lÆ°á»£ng cao (XTTS)
- **Máº·c Ä‘á»‹nh:** **Táº¯t** (Piper).  
- **HÃ nh vi:** Náº¿u phÃ¡t hiá»‡n **CUDA** â†’ dÃ¹ng GPU; náº¿u **khÃ´ng** â†’ cháº¡y CPU.
- **ThÃ´ng Ä‘iá»‡p:**  
  - **CÃ³ GPU:** Toast â€” *â€œHighâ€‘Quality Ä‘ang dÃ¹ng tÄƒng tá»‘c GPU.â€*  
  - **KhÃ´ng CUDA (ngáº¯n):** Toast â€” *â€œHighâ€‘Quality cháº¡y khÃ´ng cÃ³ GPU. Thá»i gian táº¡o cÃ³ thá»ƒ lÃ¢u hÆ¡n.â€*  
  - **KhÃ´ng CUDA (láº§n Ä‘áº§u â€“ dialog):**  
    **TiÃªu Ä‘á»:** *Highâ€‘Quality trÃªn CPU*  
    **Ná»™i dung:** *KhÃ´ng phÃ¡t hiá»‡n GPU NVIDIA (CUDA) tÆ°Æ¡ng thÃ­ch. Highâ€‘Quality váº«n hoáº¡t Ä‘á»™ng nhÆ°ng cÃ³ thá»ƒ cháº­m hÆ¡n. Báº¡n cÃ³ thá»ƒ tiáº¿p tá»¥c hoáº·c chuyá»ƒn vá» Cháº¿ Ä‘á»™ Chuáº©n (Piper) báº¥t cá»© lÃºc nÃ o.*  
    **NÃºt:** **Tiáº¿p tá»¥c báº±ng CPU** (chÃ­nh) Â· **DÃ¹ng cháº¿ Ä‘á»™ Chuáº©n** (phá»¥) Â· [ ] *Äá»«ng hiá»‡n láº¡i*
- **RÃ ng buá»™c pháº¡m vi:** HQ **chá»‰** nÃ¢ng cháº¥t lÆ°á»£ng; **khÃ´ng** má»Ÿ thÃªm tÃ­nh nÄƒng ngoÃ i nhá»¯ng má»¥c Ä‘Ã£ nÃªu.  
- **UI:** CÃ´ng táº¯c á»Ÿ header + huy hiá»‡u **HQ** trÃªn cÃ¡c Block Ä‘ang dÃ¹ng.

**AC:** HQ cháº¡y Ä‘Æ°á»£c cáº£ khi khÃ´ng cÃ³ CUDA; hiá»‡n Ä‘Ãºng thÃ´ng Ä‘iá»‡p; táº¯t HQ quay vá» Piper ngay.

---

## 10) SSML (chá»‰ khi HQ)

- **KhÃ´ng nháº­n SSML thÃ´ tá»« ngÆ°á»i dÃ¹ng.** á»¨ng dá»¥ng **khÃ´ng** hiá»ƒn thá»‹/chá»‰nh hoáº·c phÃ¢n tÃ­ch tháº» SSML do ngÆ°á»i dÃ¹ng dÃ¡n vÃ o; má»i ná»™i dung nháº­p Ä‘Æ°á»£c coi lÃ  **plain text**.
- **Pháº¡m vi:** **chá»‰ Ã¡p á»Ÿ CÃ¢u (Row)**; má»—i CÃ¢u cÃ³ nÃºt **â€œHiá»‡u chá»‰nh nÃ¢ng caoâ€** (chá»‰ hiá»ƒn thá»‹ khi **Highâ€‘Quality** báº­t). Khi báº¥m **Generate**, cÃ¡c tham sá»‘ UI á»Ÿ cáº¥p CÃ¢u sáº½ Ä‘Æ°á»£c Ã¡p ngáº§m vÃ o vÄƒn báº£n gá»­i engine.
- **CÆ¡ cháº¿ Ã¡p dá»¥ng:** NgÆ°á»i dÃ¹ng chá»‰ Ä‘iá»u chá»‰nh qua **UI nháº¥n nhÃ¡** (thanh trÆ°á»£t Pitch/Rate/Volume/Break). Khi báº¥m **Generate**, há»‡ thá»‘ng **má»›i** chuyá»ƒn cÃ¡c tham sá»‘ UI thÃ nh chá»‰ thá»‹ SSML **ngáº§m** vÃ  gá»­i cho engine xá»­ lÃ½.
- **Whitelist (á»Ÿ táº§ng engine, ná»™i bá»™):** `<break>`, `<prosody rate|pitch|volume>`, `<emphasis>`, `<say-as â€¦>` â€” khÃ´ng hiá»ƒn thá»‹ ra UI.
- **Kiá»ƒm tra:** náº¿u tham sá»‘ UI vÆ°á»£t ngÆ°á»¡ng há»£p lá»‡, hiá»ƒn thá»‹ lá»—i inline vÃ  khÃ´ng render cho tá»›i khi chá»‰nh láº¡i.
- **LÆ°u dá»¯ liá»‡u:** trong file project chá»‰ lÆ°u **tham sá»‘ UI** (khÃ´ng lÆ°u chuá»—i SSML).

**AC:**
- VÄƒn báº£n dÃ¡n cÃ³ chá»©a kÃ½ tá»± giá»‘ng tháº» (vÃ­ dá»¥ `<break>`) váº«n hiá»ƒn thá»‹ nhÆ° **plain text**, khÃ´ng bá»‹ xá»­ lÃ½.
- Báº¥m Generate: audio pháº£n Ã¡nh Ä‘Ãºng thay Ä‘á»•i tá»« UI; khÃ´ng cÃ³ hiá»‡n tÆ°á»£ng sinh tháº» trÃ¹ng/chÃ©o.

---

## 11) Hiá»‡u chá»‰nh nÃ¢ng cao cho CÃ¢u (HQ)

- **CÃ¡ch má»Ÿ:** á» má»—i CÃ¢u (Row) cÃ³ nÃºt **Hiá»‡u chá»‰nh nÃ¢ng cao** (hiá»‡n khi HQ báº­t).

- **Khung lÃ m viá»‡c (2 cá»™t):**
  - **TrÃ¡i: VÄƒn báº£n cÃ¢u** (plain text) vá»›i kháº£ nÄƒng chá»n vÃ¹ng:
    - **Nháº¥p kÃ©p** Ä‘á»ƒ chá»n **tá»«**; **kÃ©o** Ä‘á»ƒ chá»n **cá»¥m**; **Shift+MÅ©i tÃªn** má»Ÿ rá»™ng/thu háº¹p; **Ctrl/Cmd+Nháº¥p** chá»n nhiá»u vÃ¹ng rá»i.
    - VÃ¹ng Ä‘Ã£ chá»n Ä‘Æ°á»£c **highlight**; cÃ³ **Clear selection**; **Tab** nháº£y tá»›i vÃ¹ng Ä‘Ã£ chá»‰nh tiáº¿p theo.
  - **Pháº£i: Báº£ng Ä‘iá»u khiá»ƒn** (UI duy nháº¥t, khÃ´ng hiá»ƒn thá»‹ tháº»):
    1) **Nhá»‹p & sáº¯c thÃ¡i (Prosody)**  
       - **Tá»‘c Ä‘á»™ (Rate):** âˆ’20% â€¦ +20% (bÆ°á»›c 5%).  
       - **Cao Ä‘á»™ (Pitch):** âˆ’5 â€¦ +5 (bÆ°á»›c 1) â€” Ä‘Æ¡n vá»‹ tÆ°Æ¡ng Ä‘á»‘i (â‰ˆ bÃ¡n Ã¢m).  
       - **Ã‚m lÆ°á»£ng (Volume):** âˆ’6 dB â€¦ +6 dB (bÆ°á»›c 1 dB).  
    2) **Ngáº¯t nghá»‰ (Breaks)**  
       - **TrÆ°á»›c** vÃ  **Sau** vÃ¹ng chá»n: 0â€“400 ms (bÆ°á»›c 50 ms).  
       - Chip nhanh: **Short 100 ms Â· Medium 200 ms Â· Long 300 ms**.  
    3) **Má»©c nháº¥n (Emphasis)**  
       - Chip: **None Â· Light Â· Medium Â· Strong** (Ã¡p cho vÃ¹ng chá»n).  
    4) **CÃ¡ch Ä‘á»c (Sayâ€‘as)**  
       - Chip: **Characters Â· Spellâ€‘out Â· Ordinal Â· Cardinal Â· Date Â· Time Â· Unit**.  
       - Khi chá»n **Date/Time/Unit**, hiá»ƒn thá»‹ tÃ¹y chá»n gá»£i Ã½ (Ä‘á»‹nh dáº¡ng ngÃ y, AM/PM, Ä‘Æ¡n vá»‹ viáº¿t táº¯t) â€” máº·c Ä‘á»‹nh theo locale Project.  
    5) **Pháº¡m vi Ã¡p dá»¥ng**  
       - **Apply to:** **VÃ¹ng Ä‘Ã£ chá»n** Â· **ToÃ n cÃ¢u**.  
       - **Apply to all occurrences:** **máº·c Ä‘á»‹nh trong Block**; cÃ³ checkbox **â€œCÅ©ng Ã¡p dá»¥ng toÃ n Projectâ€** (máº·c Ä‘á»‹nh táº¯t).  
    6) **Xem trÆ°á»›c & hoÃ n tÃ¡c**  
       - **KhÃ´ng autoâ€‘preview**: thay Ä‘á»•i sáº½ hiá»ƒn thá»‹ huy hiá»‡u *â€œCáº§n xem trÆ°á»›câ€*.  
       - NÃºt **Xem trÆ°á»›c vÃ¹ng chá»n** vÃ  **Xem trÆ°á»›c cáº£ cÃ¢u** Ä‘á»ƒ render láº¡i audio.  
       - **Reset vÃ¹ng chá»n** Â· **Reset cáº£ cÃ¢u**.  

- **HÃ nh vi & rÃ ng buá»™c:**
  - UI lÃ  **nguá»“n dá»¯ liá»‡u duy nháº¥t**; há»‡ thá»‘ng Ã¡nh xáº¡ ngáº§m sang chá»‰ thá»‹ khi render, **khÃ´ng táº¡o trÃ¹ng láº·p** trÃªn cÃ¹ng pháº¡m vi.
  - Náº¿u thiáº¿t láº­p vÆ°á»£t ngÆ°á»¡ng/khÃ´ng phÃ¹ há»£p (vÃ­ dá»¥ Break > 400 ms), hiá»ƒn thá»‹ cáº£nh bÃ¡o **inline** vÃ  vÃ´ hiá»‡u **Generate** cho cÃ¢u Ä‘Ã³ tá»›i khi sá»­a.
  - CÃ¢u quÃ¡ dÃ i váº«n tuÃ¢n thá»§ **tÃ¡ch áº©n** theo quy táº¯c á»Ÿ Â§3; má»i Ä‘iá»u chá»‰nh Ã¡p dá»¥ng nháº¥t quÃ¡n lÃªn cÃ¡c phÃ¢n máº£nh áº©n.

- **TiÃªu chÃ­ cháº¥p nháº­n:**
  - Má»Ÿ panel tá»« nÃºt **Hiá»‡u chá»‰nh nÃ¢ng cao** vÃ  thao tÃ¡c chá»n vÃ¹ng hoáº¡t Ä‘á»™ng mÆ°á»£t (nháº¥p kÃ©p/kÃ©o/Shift/Ctrlâ€‘Cmd).
  - Thay Ä‘á»•i slider/chip â†’ hiá»ƒn thá»‹ *Cáº§n xem trÆ°á»›c*; khi báº¥m **Xem trÆ°á»›c** thÃ¬ audio pháº£n Ã¡nh Ä‘Ãºng thay Ä‘á»•i.  
  - ÄÃ³ng panel, quay láº¡i Workspace: highlight cÃ²n nguyÃªn; báº¥m **Generate** cho Project/Block/CÃ¢u cho ra audio Ä‘Ãºng hiá»‡u á»©ng.

### Wording cá»¥ thá»ƒ cho Panel (VI/EN)

**Thanh trÆ°á»£t / Sliders**
- **Tá»‘c Ä‘á»™ (Rate)** â€” *Cháº­m* â†” *Nhanh*  
  EN: **Rate** â€” *Slower* â†” *Faster*  
  Tooltip VI: â€œÄiá»u chá»‰nh nhá»‹p Ä‘á»c cá»§a vÃ¹ng chá»n (âˆ’20% Ä‘áº¿n +20%, bÆ°á»›c 5%).â€  
  Tooltip EN: â€œAdjust speaking rate for the selection (âˆ’20% to +20%, step 5%).â€
- **Cao Ä‘á»™ (Pitch)** â€” *Tháº¥p* â†” *Cao*  
  EN: **Pitch** â€” *Lower* â†” *Higher*  
  Tooltip VI: â€œÄiá»u chá»‰nh cao Ä‘á»™ tÆ°Æ¡ng Ä‘á»‘i (âˆ’5 Ä‘áº¿n +5, bÆ°á»›c 1).â€  
  Tooltip EN: â€œAdjust relative pitch (âˆ’5 to +5, step 1).â€
- **Ã‚m lÆ°á»£ng (Volume)** â€” *Nháº¹* â†” *Máº¡nh*  
  EN: **Volume** â€” *Softer* â†” *Louder*  
  Tooltip VI: â€œÄiá»u chá»‰nh má»©c Ã¢m lÆ°á»£ng cá»§a vÃ¹ng chá»n (âˆ’6 dB Ä‘áº¿n +6 dB, bÆ°á»›c 1 dB).â€  
  Tooltip EN: â€œAdjust loudness of the selection (âˆ’6 dB to +6 dB, step 1 dB).â€
- **Ngáº¯t ngáº¯n (Break)** â€” *KhÃ´ng* â†” *+400 ms*  
  EN: **Break** â€” *None* â†” *+400 ms*  
  Tooltip VI: â€œChÃ¨n ngáº¯t trÆ°á»›c/sau vÃ¹ng chá»n. DÃ¹ng chip nhanh Ä‘á»ƒ chá»n 100/200/300 ms.â€  
  Tooltip EN: â€œInsert pause before/after the selection. Use quick chips for 100/200/300 ms.â€

**Chip nhanh / Quick chips**
- **Ngáº¯t trÆ°á»›c / Break before** Â· **Ngáº¯t sau / Break after**  
  EN: **Break before** Â· **Break after**
- **Short 100 ms** Â· **Medium 200 ms** Â· **Long 300 ms** (VI/EN giá»¯ nguyÃªn sá»‘ Ä‘o)
- **Má»©c nháº¥n (Emphasis)**: **None Â· Light Â· Medium Â· Strong** (VI/EN giá»‘ng nhau)
- **CÃ¡ch Ä‘á»c (Sayâ€‘as)**: **Characters Â· Spellâ€‘out Â· Ordinal Â· Cardinal Â· Date Â· Time Â· Unit** (VI: **KÃ½ tá»±** Â· **ÄÃ¡nh váº§n** Â· **Sá»‘ thá»© tá»±** Â· **Sá»‘ Ä‘áº¿m** Â· **NgÃ y** Â· **Giá»** Â· **ÄÆ¡n vá»‹**)

**NÃºt & hÃ nh Ä‘á»™ng / Buttons & actions**
- **Ãp dá»¥ng cho vÃ¹ng chá»n**  
  EN: **Apply to selection**
- **Ãp dá»¥ng cho toÃ n cÃ¢u**  
  EN: **Apply to sentence**
- **Ãp dá»¥ng cho táº¥t cáº£ láº§n xuáº¥t hiá»‡n (trong Block)**  
  EN: **Apply to all occurrences (in Block)**
- **CÅ©ng Ã¡p dá»¥ng toÃ n Project** *(checkbox)*  
  EN: **Also apply across Project** *(checkbox)*
- **Xem trÆ°á»›c vÃ¹ng chá»n** Â· **Xem trÆ°á»›c cáº£ cÃ¢u**  
  EN: **Preview selection** Â· **Preview sentence**
- **Äáº·t láº¡i vÃ¹ng chá»n** Â· **Äáº·t láº¡i cáº£ cÃ¢u**  
  EN: **Reset selection** Â· **Reset sentence**
- **ÄÃ³ng** / **LÆ°u** *(tuá»³ chá»n náº¿u cáº§n lÆ°u cá»¥c bá»™ mÃ  chÆ°a Generate)*  
  EN: **Close** / **Save**

**Tooltip chá»n vÃ¹ng / Selection tips**
- VI: â€œNháº¥p kÃ©p Ä‘á»ƒ chá»n tá»«. KÃ©o chuá»™t Ä‘á»ƒ chá»n cá»¥m. Shift + MÅ©i tÃªn Ä‘á»ƒ má»Ÿ rá»™ng. Ctrl/Cmd + Nháº¥p Ä‘á»ƒ chá»n nhiá»u vÃ¹ng.â€  
  EN: â€œDoubleâ€‘click to select a word. Drag to select a phrase. Shift + Arrows to expand. Ctrl/Cmd + Click to multiâ€‘select.â€

**ThÃ´ng bÃ¡o tráº¡ng thÃ¡i / Status toasts**
- VI: â€œÄÃ£ Ã¡p dá»¥ng cho 4 láº§n xuáº¥t hiá»‡n (trong Block).â€ Â· â€œKhÃ´ng cÃ³ vÃ¹ng chá»n.â€ Â· â€œÄÃ£ Ä‘áº·t láº¡i vá» máº·c Ä‘á»‹nh.â€  
  EN: â€œApplied to 4 occurrences (in Block).â€ Â· â€œNo selection.â€ Â· â€œReset to defaults.â€

**Cáº£nh bÃ¡o / Validation**
- VI: â€œGiÃ¡ trá»‹ vÆ°á»£t ngÆ°á»¡ng cho phÃ©p.â€ Â· â€œHÃ£y chá»n vÃ¹ng trÆ°á»›c khi Ã¡p dá»¥ng.â€ Â· â€œBáº­t Highâ€‘Quality Ä‘á»ƒ sá»­ dá»¥ng Hiá»‡u chá»‰nh nÃ¢ng cao.â€  
  EN: â€œValue out of allowed range.â€ Â· â€œSelect a region before applying.â€ Â· â€œTurn on Highâ€‘Quality to use Advanced adjustments.â€

---

## 12) Chuáº©n hoÃ¡ vÄƒn báº£n & Protected patterns
- Chuáº©n hoÃ¡ Ä‘á»c **sá»‘, Ä‘Æ¡n vá»‹, tiá»n tá»‡, ngÃ y giá»**.  
- **Protected patterns:** danh sÃ¡ch ngÆ°á»i dÃ¹ng tá»± chá»‰nh Ä‘á»ƒ **khÃ´ng** bá»‹ tÃ¡ch/má»Ÿ rá»™ng.  
- Máº·c Ä‘á»‹nh: Chuáº©n hoÃ¡ **Báº­t**.

**AC:** â€œ3kgâ€ â†’ â€œthree kilogramsâ€; cÃ¡c token Ä‘Æ°á»£c báº£o vá»‡ giá»¯ nguyÃªn.

---

## 13) Nháº¡c ná»n (FX) & Ducking
- Cung cáº¥p **5 track máº«u** (vÃ²ng láº·p 8â€“12s, trung tÃ­nh, placeholder há»£p lá»‡ báº£n quyá»n):
  1. **Soft Ambient Pad** â€” ná»n synth thoÃ¡ng, khÃ´ng trá»‘ng, trung tÃ­nh.
  2. **Light Corporate Bed** â€” piano/guitar nháº¹ nhÃ ng, chuyá»ƒn Ä‘á»™ng tá»‘i thiá»ƒu.
  3. **Classroom Calm Piano** â€” piano Ãªm, cáº£m giÃ¡c phÃ²ng há»c áº¥m.
  4. **Neutral Low Drone** â€” ná»n táº§n sá»‘ tháº¥p áº¥m, trÃ¡nh che giá»ng.
  5. **Clean Tick Bed** â€” tiáº¿ng tick nháº¹ Ä‘á»ƒ giá»¯ nhá»‹p (khÃ´ng kick/snare).
- **Autoâ€‘ducking:** **Báº­t** khi báº­t FX.
- **Pháº¡m vi:** Ã¡p á»Ÿ **Project** hoáº·c **Block** (bá» cáº¥p Row á»Ÿ GÄ1 Ä‘á»ƒ UI gá»n).

**AC:** Báº­t FX váº«n nghe lá»i rÃµ; Ä‘á»•i track khÃ´ng lÃ m sai thá»i lÆ°á»£ng; vÃ²ng láº·p mÆ°á»£t trong â‰¥3 phÃºt phÃ¡t liÃªn tá»¥c.

---

## 14) Kiá»ƒm soÃ¡t cháº¥t lÆ°á»£ng Ã¢m (QC)
- **Má»¥c tiÃªu:** **âˆ’16 LUFS (stereo)**, **true peak âˆ’1.0 dBTP**.  
- Sau khi render: Ä‘o vÃ  **Autoâ€‘normalize & Limit** (máº·c Ä‘á»‹nh **Báº­t**).  
- Hiá»ƒn thá»‹ cáº£nh bÃ¡o QC (nguy cÆ¡ clipping, LUFS lá»‡ch); nÃºt **â€œSá»­a (Fix)â€** Ã¡p normalizer.

**AC:** File xuáº¥t náº±m trong Â±0.5 LUFS quanh âˆ’16; true peak â‰¤ âˆ’1.0 dBTP; cÃ³ cáº£nh bÃ¡o khi vÆ°á»£t ngÆ°á»¡ng.

---

## 15) Nghe thá»­
- Nghe theo **Row**, **Block**, **Project**.  
- **KhÃ´ng** cÃ³ waveform/loop/scrub á»Ÿ GÄ1.

**AC:** Play toÃ n project theo Ä‘Ãºng thá»© tá»± block, khÃ´ng giáº­t khi chuyá»ƒn.

---

## 16) Xuáº¥t tá»‡p
- **Äá»‹nh dáº¡ng:** **WAV (24â€‘bit 48 kHz)** vÃ  **MP3 (192/256/320 kbps)**.  
- **Pháº¡m vi:** Xuáº¥t theo **Row**, **Block**, hoáº·c **Project**; nhiá»u file â†’ **ZIP**.  
- **TÃªn file (tá»‘i Æ°u cache, ngáº¯n):** `p-{proj}_b{B}_r{R}_spk{S}_m{mode}.{ext}`  
  - `mode`: `p` = Piper, `x` = XTTS.

**AC:** Xuáº¥t Ä‘Æ°á»£c á»Ÿ má»i pháº¡m vi; tÃªn file ngáº¯n vÃ  á»•n Ä‘á»‹nh cho cache.

---

## 17) Jobs báº¥t Ä‘á»“ng bá»™ & Äá»™ bá»n
- Tráº¡ng thÃ¡i: **Queued Â· Processing Â· Done Â· Error**.  
- Hiá»ƒn thá»‹ tiáº¿n Ä‘á»™ theo Row (**x/y**) á»Ÿ cáº¥p Block & Project.  
- Äiá»u khiá»ƒn: **Cancel, Pause, Resume, Retry**.  
- **Tá»± retry:** tá»‘i Ä‘a **2 láº§n/Row** vá»›i lá»—i táº¡m thá»i.  
- Khi má»™t sá»‘ Row lá»—i: tiáº¿p tá»¥c cÃ¡c Row khÃ¡c; hiá»ƒn thá»‹ Retry riÃªng cho Row lá»—i.

**AC:** Render dÃ i khÃ´ng khoÃ¡ UI; Row lá»—i cÃ³ thá»ƒ retry riÃªng; autoâ€‘retry cÃ³ log sá»‘ láº§n.

---

## 18) Lá»‹ch sá»­ & áº¢nh chá»¥p (Snapshot)
- Lá»‹ch sá»­ Ä‘Æ¡n giáº£n theo Block; **Undo/Redo** cho cÃ¡c thao tÃ¡c chÃ­nh.  
- **Snapshot Project** trÆ°á»›c khi render hÃ ng loáº¡t.

**AC:** Phá»¥c há»“i snapshot khÃ´i phá»¥c giá»ng, style, text, FX, tráº¡ng thÃ¡i HQ.

---

## 19) Quáº£n lÃ½ Project
- **CRUD** project; lÆ°u/má»Ÿ file `.vtnproj`.  
- **Metadata lÆ°u:** language=EN, voice/style máº·c Ä‘á»‹nh, mapping nhÃ¢n váº­t, protected patterns, lá»±a chá»n FX, tráº¡ng thÃ¡i HQ.

**AC:** Má»Ÿ láº¡i project khÃ´i phá»¥c Ä‘Ãºng tráº¡ng thÃ¡i láº§n trÆ°á»›c.

---

## 20) Máº·c Ä‘á»‹nh (GÄ1)
- **Speed:** 0% (1.0Ã—)  
- **Pitch:** 0%  
- **Variability:** 5% (chá»‰ hiá»‡n khi HQ)  
- **Pause:** dáº¥u pháº©y 120 ms Â· dáº¥u cháº¥m 300 ms Â· xuá»‘ng dÃ²ng 500 ms  
- **Tá»± tÃ¡ch cÃ¢u:** **Báº­t**

**Macro style (Ä‘á»™ lá»‡ch gá»£i Ã½):**
- Conversational: Speed +2%, Pitch +1%, Pause +5%
- Newscast: Speed +6%, Pitch âˆ’1%, Pause âˆ’10%
- Storytelling: Speed âˆ’4%, Pitch âˆ’1%, Pause +15%
- Promo: Speed +8%, Pitch +2%, Pause âˆ’15%
- Calm: Speed âˆ’6%, Pitch âˆ’2%, Pause +10%
- Excited: Speed +10%, Pitch +3%, Pause âˆ’5%
- Whisper: Volume âˆ’6 dB, Speed âˆ’2%, Pause +8%
- Narration: Speed 0%, Pitch 0%, Pause +5%

**AC:** Macro táº¡o khÃ¡c biá»‡t vá»«a pháº£i; ghÃ©p váº«n mÆ°á»£t.

---

## 21) PhÃ­m táº¯t
`Space` Play/Pause Â· `J/K` CÃ¢u trÆ°á»›c/Sau Â· `S` TÃ¡ch Â· `M` Gá»™p Â· `H` Báº­t/Táº¯t HQ Â· `E` Xuáº¥t Â· `R` Retry lá»—i Â· `N` ThÃªm Block Â· `Ctrl/Cmd+Z` HoÃ n tÃ¡c Â· `Ctrl/Cmd+Y` LÃ m láº¡i

**AC:** Hoáº¡t Ä‘á»™ng trÃªn Windows/Mac; tooltip hiá»ƒn thá»‹ mapping.

---

## 22) Äa ngÃ´n ngá»¯ (i18n)
- **NgÃ´n ngá»¯ UI:** **EN/VI**, cÃ³ nÃºt chuyá»ƒn trÃªn header.  
- Láº§n Ä‘áº§u theo **ngÃ´n ngá»¯ há»‡ thá»‘ng**; cÃ¡c láº§n sau **nhá»›** lá»±a chá»n gáº§n nháº¥t.  
- Chuyá»ƒn ngÃ´n ngá»¯ **khÃ´ng** lÃ m thay Ä‘á»•i dá»¯ liá»‡u project.

---

## 23) Quyá»n riÃªng tÆ° & LÆ°u trá»¯ cá»¥c bá»™
- LÆ°u káº¿t quáº£ trong thÆ° má»¥c cá»§a project.  
- NÃºt **Clear audio cache**.  
- Telemetry: **Táº¯t** á»Ÿ GÄ1.

**AC:** XoÃ¡ cache **khÃ´ng** xoÃ¡ cÃ¡c file Ä‘Ã£ xuáº¥t.

---

## 24) Giai Ä‘oáº¡n 2 (Ä‘á»‹nh hÆ°á»›ng)
- Vai trÃ²: **Admin Â· Editor Â· Viewer**.  
- Chia sáº» project: **xem + render** (khÃ´ng cho sá»­a).  
- Háº¡n má»©c tÃ i nguyÃªn: nhá» gá»n, má»—i ngÆ°á»i dÃ¹ng cÃ³ 1 hÃ ng Ä‘á»£i vá»›i 1 job Ä‘á»“ng thá»i.

---

## 25) Tráº¡ng thÃ¡i mÃ´ hÃ¬nh (minh báº¡ch)
- Settings hiá»ƒn thá»‹ **GPU availability: Yes/No**; cÃ³ huy hiá»‡u nhá» khi phÃ¡t hiá»‡n CUDA.

---

## 26) Ma tráº­n cháº¥p nháº­n (tÃ³m táº¯t)
| Khu vá»±c | Äiá»u kiá»‡n cáº§n Ä‘áº¡t |
|---|---|
| DÃ¡n/TÃ¡ch | TÃ¡ch Ä‘oáº¡n/cÃ¢u chÃ­nh xÃ¡c; tÃ´n trá»ng token báº£o vá»‡; `[Name]:` â†’ map nhÃ¢n váº­t. |
| Chá»‰nh Block/Row | CÃ³ Undo; giá»¯ thá»«a káº¿ voice/style; preview tá»©c thá»i. |
| CÃ´ng táº¯c HQ | Hoáº¡t Ä‘á»™ng cáº£ khi cÃ³/khÃ´ng CUDA; thÃ´ng Ä‘iá»‡p rÃµ; táº¯t Ä‘Æ°á»£c ngay. |
| SSML/Hiá»‡u chá»‰nh CÃ¢u | Chá»‰ khi HQ; tham sá»‘ UI há»£p lá»‡; sinh chá»‰ thá»‹ ngáº§m; audio pháº£n Ã¡nh Ä‘Ãºng. |
| FX & ducking | Giá»ng rÃµ rÃ ng; thá»i lÆ°á»£ng khÃ´ng Ä‘á»•i; Ã¡p theo Project/Block. |
| QC | Xuáº¥t á»Ÿ âˆ’16 LUFS Â±0.5; true peak â‰¤ âˆ’1.0 dBTP; Fix hoáº¡t Ä‘á»™ng. |
| Xuáº¥t | WAV/MP3; Row/Block/Project; ZIP; tÃªn ngáº¯n dá»… cache. |
| Jobs | UI khÃ´ng bá»‹ cháº·n; tiáº¿n Ä‘á»™ per Row; Cancel/Pause/Resume/Retry; autoâ€‘retry Ã—2. |
| Lá»‹ch sá»­/Snapshot | Phá»¥c há»“i Ä‘áº§y Ä‘á»§ thiáº¿t láº­p liÃªn quan. |
| i18n & lÆ°u trá»¯ | EN/VI chuyá»ƒn Ä‘á»•i; xoÃ¡ cache an toÃ n. |

---

## 27) Viá»‡c cáº§n chá»‘t tiáº¿p
- Avatar giá»ng (stock) vÃ  mÃ´ táº£ cuá»‘i cho tá»«ng giá»ng.
